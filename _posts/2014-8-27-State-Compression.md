---
layout: post
tags: algorithm
---

### Bit Manipulation    
[Matrix67博客](http://www.matrix67.com/blog/)  位运算[[1]](http://www.matrix67.com/blog/archives/263) [[2]](http://www.matrix67.com/blog/archives/264) [[3]](http://www.matrix67.com/blog/archives/266) [[4]](http://www.matrix67.com/blog/archives/268) [[extral]](http://www.matrix67.com/blog/archives/813)            

笔记：      

{% highlight c  %}

// 位操作
	(x|1)                  //最后一位变成1
	(x|1)-1    		 //最后一位变成0  
	x^1        		 //最后一位取反
	x|(1<<k)   		 //右数第k位变成1
	x&(~(1<<k))		 //右数第k位变成0
	x^(1<<k) 		 //右数第k位取反
	x&((1<<k)-1)	 	 //取末k位
	x^((1<<k)-1)          //末k位取反
	x&(x+1)    		 //低位连续的1变成0
	x|(x+1)    		 //低位第一个0变成1
	x|(x-1)    		 //低位连续的0变成1
	(x^(x+1))&x		 //取低位连续的1
	x&(-x)     		 //取低位第一个1
	x^(x>>1)   		 //第x个Gray码

//用位运算生成有k个1的二进制数
    b=x&(-x);
    t=x+b;
    c=t^x;
    m=(c>>2)/b;
    r=t|m;

{% endhighlight %}

<br>
### Fun Problem in Chess 
[看起来很清爽的sgu](http://acm.sgu.ru/)       [my code](https://github.com/shiyuan/acm/tree/master/Study/State%20Compression/sgu)       


220.Little Bishops    
求n^2的棋盘放k个Bishop，互相之间不攻击的方案数,Bishop的攻击范围为所有对角线(1<=n<=10,0<=k<=n^2)     
分成黑白棋，颜色不同的肯定互相之间不会攻击，对于其中一种，把格子抽出来，旋转45度，就转换成King的问题,可以横纵进行攻击了，但是行列的大小有限制，排序之后，形成一个塔，每行至多选一个元素，dp[i][j]表示前i行已经选了j个方案数，dp[i][j]=dp[i-1][j],dp[i][j]+=dp[i-1][j-1]\*(num-(j-1));     

221.Big Bishops    
220的加强版,1<=n<=50,0<=k<=n^2，思路一样，高精度，可以写成滚动数组    

222.Little Rooks     
求n^2的棋盘放k个Rook，互相之间不攻击的方案数,Rook的攻击范围为垂直方向和水平方向(1<=n<=10,0<=k<=n^2)     
可以dfs打表出非0的答案，或者直接用组合公式C(n,k)\*C(n,k)\*k!,或者状态dp，dp[i][j][k]表示前i行累积状态为j，放k个Rook的方案数    

223.Little Kings    
求n^2的棋盘放k个King，互相之间不攻击的方案数,King的攻击范围为周围八个格子(1<=n<=10,0<=k<=n^2)      
简单的状态dp，预处理一下实际状态数不会超过144，dp[i][j][k]表示前i行，第i行状态为j，放k个King的方案数    

224.Little Queens     
求n^2的棋盘放k个Queen，互相之间不攻击的方案数,Queen的攻击为垂直水平和对角线方向(1<=n<=10,0<=k<=n^2)       
dfs，多开两个数组记录n-(i-j)和i+j这两条线是否被访问过       
matrix67博客里有一个位运算的写法，就是把两条斜线的标记转化成位运算     

225.Little Knights     
求n^2的棋盘放k个Knight，互相之间不攻击的方案数,Knight的攻击范围同中国象棋里的马，日字(1<=n<=10,0<=k<=n^2)     
范围比较大，不能直接做，dp[i][j][k]表示前i行，第i-1行和第i行的状态为j(分别为i>>n,i-((i>>n))>>n),放k个骑士的方案数，先预处理出(1<<(2\*n))中相邻两行合法的状况，然后预处理出这3w个状态能接受的,下一个(1<<n)内的状态。n=10的时候打表即可。    

249.Matrix     
生成一个2^n\*2^m的矩阵，使得每个相邻元素只有一位不同     
二维Gray码，两位Gray码合并      

269.Rooks    
给出n(<=250)行,每行有a[i](<=250)个格子,问放K个Rook的方案数   
简单dp,注意到n=250，所有a[i]=250,K=250时答案为250！，所以用高精度    

<br>
### Basic Bitmask DP
[hdu](http://acm.hdu.edu.cn/) [poj](http://poj.org/) [vijos](https://www.vijos.org/p) [my code](https://github.com/shiyuan/acm/tree/master/Study/State%20Compression/code)       
 
hdu1565    
n^2(<=20)方格取数，任意格子没有公共边，求取的数的和最大    
预处理每行合法状态，dp[i][j]表示第i行状态为j的最大值，dp[i][j]=dp[i-1][k]+val(i,j)    

poj3254     
M*N的矩阵(1<=M,N<=12),为1的可以放牧，为0的不能，问有多少种方案放牧，每头牛互相之间没有公共边    
预处理每行合法状态，不超过400，dp[i][j]表示第i行状态为第j种状态的方案数，dp[i][j]+=dp[i-1][k]    

poj1185    
炮兵阵地，每个炮兵的攻击范围是上下左右两个单位距离，给出可以放的位置，求最多能放多少个    
预处理每行合法状态，不超过260，dp[i][j][k]表示第i行状态为第j种，第i-1行为第k种状态时，最多能放的个数    

hdu4539    
排兵布阵，每个兵的攻击范围是曼哈顿距离为2的点，给出可以放的位置，求最多能放多少个     
预处理每行合法状态，不超过170，dp[i][j][k]表示第i行状态为第j种，第i-1行为第k种状态时，最多能放的个数    

poj2663    
求3\*n的长方块用1\*2的洛骨牌覆盖的方案数     
只考虑两列当前已经被填充的状态，直接暴力。   

poj3311     
外卖员送n(<=10)份外卖，已知到每个点之间的距离，求送完外卖并回去的最短距离    
dp[i][j]表示当前去过的点的状态为i，当前处于j点的最短距离，最后加上一个回去的距离即可     

hdu3006    
已知n(<=100)个集合，每个集合中数字(<=14),问最多能产生多少个不同的集合   
状态枚举初始集合，然后判断当前状态能不能由两个已知的集合产生    

vijos1197 费解的开关    
5\*5的灯泡，每次操作自己和上下左右都会改变状态，问6步之内能否全部置为1   
枚举第一行操作的状态，根据当前行的影响和下一行灯泡的状态可以确定下一行操作的状态         

vijos1193 扫雷     
两列n行(n<=1w)，第一列每行有雷或者没有，第二列每行是对周围雷的个数的反映，求雷分布的方案数    
前3行枚举，后面的设dp[i][j]表示枚举到当前第i行，i-2,i-1,i这三行的状态合并起来为j的方案数    

vijos1286 座位安排    
n行m列安排K个人考试，求安排情况保证任意两个人没有公共边的期望(1<=n,m,n\*m<=80,0<=k<=20,k<=n\*m)     
使n>m,若输入不符则swap,这样m的最大值为9，预处理可行状态，然后dp,dp[i][j][k]表示第i行状态为第j种时，一共安排了k个人的方案数。至于期望，就是总的方案数C(n\*m,K)/ans,可以高精度，也可以用vector存着一直化简    

vijos1456 最小总代价    
n个人之间有各自的传递代价，问一个东西在n个人中传n-1轮的最小代价和   
dp[i][j]表示当前状态为i，东西传到第j个人的最小代价和    

vijos1426 兴奋剂检查     
五维的01背包，五个维度的上限乘积不超过500w      
看到讨论版强大的hash，这也是一种状态压缩？     

<br>
### 插头dp

[学习ing](http://www.cnblogs.com/kuangbin/archive/2012/10/02/2710343.html)



<br>
<br>
